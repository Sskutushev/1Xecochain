const translations = {
    en: {
        // Header
        'nav_dashboard': 'Dashboard',
        'nav_listing': 'Listing',
        'nav_my_tokens': 'My Tokens',
        'search_placeholder': 'Search tokens',
        'create_token_btn': 'Create new token',
        'user_name': 'Noname',
        // Dropdown
        'dd_profile_settings': 'Profile Settings',
        'dd_language': 'Language',
        'dd_lang_russian': 'Russian',
        'dd_lang_english': 'English',
        'dd_theme': 'Theme',
        'dd_balance': 'Balance:',
        'dd_logout': 'Logout',
        // Popup
        'popup_title': 'Create new token',
        'popup_btn_no_liq': 'Launch without liquidity',
        'popup_btn_liq': 'Launch with own liquidity',
        // Dashboard Cards
        'card_title_new_tokens': 'New tokens',
        'card_text_no_code': 'Create, Manage, and Distribute X1 based tokens with X1 no code solution',
        'card_btn_discover': 'Discover all tokens',
        // Listing Page
        'listing_title': 'All tokens',
        'my_tokens_title': 'My tokens',
        'token_created_by': 'Created by',
        'token_market_cap': 'Market cap',
        'token_replies': 'Replies',
        'token_age': '{age}s age', // Using a placeholder for the number
        // Token Detail Page
        'td_title': 'My New Token',
        'td_subtitle': 'Join us in building a better, decentralized futures.',
        'td_description': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natu error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.',
        'td_summary_title': 'Token summary',
        'td_summary_symbol': 'Symbol',
        'td_summary_blockchain': 'Blockchain',
        'td_summary_price': 'Price',
        'td_summary_holders': 'Holders',
        'td_summary_volume': 'Volume',
        'td_btn_quantity': 'Quantity of tokens',
        'td_btn_buy': 'Buy',
        'td_btn_sell': 'Sell',
        // Create New Token Page
        'ct_title': 'Create new token',
        'ct_upload_text': 'Upload your token image',
        'ct_upload_btn': 'Upload',
        'ct_label_name': 'Name',
        'ct_placeholder_name': 'Newtoken01',
        'ct_label_symbol': 'Symbol',
        'ct_placeholder_symbol': 'NTK',
        'ct_label_emission': 'Emission',
        'ct_placeholder_emission': '300 000 000',
        'ct_label_info': 'Info',
        'ct_placeholder_info': 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat',
        'ct_submit_btn': 'Create token',
        // Add Token Liquidity Page
        'al_title': 'Add token liquidity',
        'al_label_x1': 'X1 Token Amount',
        'al_placeholder_x1': '100 000',
        'al_label_nkt': 'NKT Token Amount',
        'al_placeholder_nkt': 'NKT',
        'al_label_price_usd': 'Token Price (USD)',
        'al_placeholder_price_usd': '$0.004',
        'al_label_price_x1': 'Token Price (X1)',
        'al_placeholder_price_x1': '4',
        'al_submit_btn': 'Create token',
    },
    ru: {
        // Header
        'nav_dashboard': 'Панель',
        'nav_listing': 'Листинг',
        'nav_my_tokens': 'Мои токены',
        'search_placeholder': 'Поиск токенов',
        'create_token_btn': 'Создать новый токен',
        'user_name': 'Noname',
        // Dropdown
        'dd_profile_settings': 'Настройки профиля',
        'dd_language': 'Выбор языка',
        'dd_lang_russian': 'Русский',
        'dd_lang_english': 'Английский',
        'dd_theme': 'Тема',
        'dd_balance': 'Баланс:',
        'dd_logout': 'Выход',
        // Popup
        'popup_title': 'Создать новый токен',
        'popup_btn_no_liq': 'Запустить без ликвидности',
        'popup_btn_liq': 'Запустить с ликвидностью',
        // Dashboard Cards
        'card_title_new_tokens': 'Новые токены',
        'card_text_no_code': 'Создавайте, управляйте и распространяйте токены на базе X1 с помощью решения X1 без кода',
        'card_btn_discover': 'Посмотреть все токены',
        // Listing Page
        'listing_title': 'Все токены',
        'my_tokens_title': 'Мои токены',
        'token_created_by': 'Создано:',
        'token_market_cap': 'Капитализация:',
        'token_replies': 'Ответы:',
        'token_age': '{age}с назад',
        // Token Detail Page
        'td_title': 'Мой новый токен',
        'td_subtitle': 'Присоединяйтесь к нам в построении лучшего, децентрализованного будущего.',
        'td_description': 'Рыбатекст используется дизайнерами, проектировщиками и фронтендерами, когда нужно быстро заполнить макеты или прототипы содержимым. Это тестовый контент, который не должен нести никакого смысла, лишь показать наличие самого текста или продемонстрировать типографику в деле. Его основная задача — дать представление о том, как будет выглядеть контент на странице, а также продемонстрировать читабельность и привлекательность выбранных шрифтов и других элементов дизайна. Использование рыбы позволяет сосредоточиться на визуальной составляющей проекта, не отвлекаясь на написание и редактуру текстов.',
        'td_summary_title': 'Сводка по токену',
        'td_summary_symbol': 'Символ',
        'td_summary_blockchain': 'Блокчейн',
        'td_summary_price': 'Цена',
        'td_summary_holders': 'Держатели',
        'td_summary_volume': 'Объем',
        'td_btn_quantity': 'Количество токенов',
        'td_btn_buy': 'Купить',
        'td_btn_sell': 'Продать',
        // Create New Token Page
        'ct_title': 'Создать новый токен',
        'ct_upload_text': 'Загрузите изображение вашего токена',
        'ct_upload_btn': 'Загрузить',
        'ct_label_name': 'Имя',
        'ct_placeholder_name': 'НовыйТокен01',
        'ct_label_symbol': 'Символ',
        'ct_placeholder_symbol': 'NTK',
        'ct_label_emission': 'Эмиссия',
        'ct_placeholder_emission': '300 000 000',
        'ct_label_info': 'Информация',
        'ct_placeholder_info': 'Рыбатекст используется дизайнерами, проектировщиками и фронтендерами, когда нужно быстро заполнить макеты или прототипы содержимым. Это тестовый контент, который не должен нести никакого смысла, лишь показать наличие самого текста или продемонстрировать типографику в деле.',
        'ct_submit_btn': 'Создать токен',
        // Add Token Liquidity Page
        'al_title': 'Добавить ликвидность токена',
        'al_label_x1': 'Количество токенов X1',
        'al_placeholder_x1': '100 000',
        'al_label_nkt': 'Количество токенов NKT',
        'al_placeholder_nkt': 'NKT',
        'al_label_price_usd': 'Цена токена (USD)',
        'al_placeholder_price_usd': '$0.004',
        'al_label_price_x1': 'Цена токена (X1)',
        'al_placeholder_price_x1': '4',
        'al_submit_btn': 'Создать токен',
    }
};

// Функция для получения текущего языка
function getCurrentLanguage() {
    return localStorage.getItem('language') || 'en';
}

// Функция для сохранения выбранного языка
function setCurrentLanguage(lang) {
    localStorage.setItem('language', lang);
}

// Функция для перевода текста
function translate(key) {
    const lang = getCurrentLanguage();
    const translation = translations[lang] && translations[lang][key];
    return translation || key; // Возвращаем ключ, если перевод не найден
}

// Функция для применения переводов ко всем элементам на странице
function applyTranslations() {
    const elements = document.querySelectorAll('[data-i18n-key]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n-key');
        const translatedText = translate(key);
        
        // Обрабатываем как обычный текст, так и placeholder
        if (element.hasAttribute('placeholder')) {
            element.placeholder = translatedText;
        } else {
            element.textContent = translatedText;
        }
    });
}

// Функция для инициализации переключения языка
function initLanguageSwitcher() {
    // Применяем переводы при загрузке
    applyTranslations();
    
    // Добавляем обработчики для языковых элементов
    const languageOptions = document.querySelectorAll('.language-option');
    languageOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Определяем язык по тексту или атрибутам
            let lang = 'en'; // по умолчанию
            const textContent = this.textContent.trim();
            
            if (textContent.includes('Русский') || textContent.includes('Russian')) {
                lang = 'ru';
            } else if (textContent.includes('Английский') || textContent.includes('English')) {
                lang = 'en';
            }
            
            // Проверяем также по изображению
            if (lang === 'en') { // если язык еще не определен по тексту
                const flagImg = this.querySelector('.flag-icon');
                if (flagImg && flagImg.src.includes('Rus.svg')) {
                    lang = 'ru';
                } else if (flagImg && flagImg.src.includes('Eng.svg')) {
                    lang = 'en';
                }
            }
            
            // Сохраняем и применяем язык
            setCurrentLanguage(lang);
            applyTranslations();
            
            // Закрываем подменю
            const languageItem = this.closest('.language-item');
            if (languageItem) {
                languageItem.classList.remove('submenu-active');
            }
            
            // Обновляем отображение текущего языка в основном элементе
            const languageSpan = this.closest('.language-submenu').parentElement.querySelector('span[data-i18n-key="dd_language"]');
            if (languageSpan) {
                languageSpan.textContent = translate('dd_language');
            }
        });
    });
    
    // Также добавляем обработчик для основного элемента языка, чтобы открывать подменю
    document.querySelectorAll('.language-item').forEach(item => {
        // Убираем предыдущий обработчик, если он был добавлен в script.js
        // Оставляем только переключение подменю, а выбор языка будет в дочерних элементах
    });
}

// Инициализируем переключение языка при загрузке DOM
document.addEventListener('DOMContentLoaded', initLanguageSwitcher);

// Экспортируем функции для использования в других файлах
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translate, getCurrentLanguage, setCurrentLanguage, applyTranslations, initLanguageSwitcher };
}